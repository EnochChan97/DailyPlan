因为项目需要，最近在学习OpenGL，记录一下学习的内容。



#### 三维变换

我们生活在一个三维的世界——如果要观察一个物体，我们可以：
1、移动或者旋转它，还可以放大或缩小它。（模型变换---M）
2、从不同的位置去观察它。（视图变换---V）
3、如果把物体画下来(光栅化)，我们可以选择：是否需要一种“近大远小”的透视效果。另外，我们可能只希望看到物体的一部分，而不是全部（剪裁）。（投影变换---P）
4、我们可能希望把整个看到的图形画下来，但它只占据纸张的一部分，而不是全部。（视口变换）
这些，都可以在OpenGL中实现。OpenGL变换实际上是通过**矩阵乘法**来实现。无论是translation、rotation还是scaling，都是通过在当前矩阵的基础上乘以一个新的矩阵来达到目的。

**以上内容跟闫令琪大佬讲光栅化那部分是对应的。**



##### 1.模型变换和视图变换

从“相对移动”的观点来看，改变观察点的位置与方向和改变物体本身的位置与方向具有等效性。在OpenGL中，实现这两种功能甚至使用的是同样的函数。
由于模型和视图的变换都通过矩阵运算来实现，在进行变换前，应先设置当前操作的矩阵为“模型视图矩阵”。设置的方法是以GL_MODELVIEW为参数调用glMatrixMode函数，像这样：

```python
glMatrixMode(GL_MODELVIEW);
```

`通常`，我们需要在进行变换前把当前矩阵设置为单位矩阵。这也只需要一行代码：

```python
glLoadIdentity();
```

glLoadIdentity是一个无参的无值函数，其功能是用一个4*4的单位矩阵来替换当前矩阵，实际上就是对当前矩阵进行初始化为单位矩阵。也就是说，无论以前进行了多少次矩阵变换，在该命令执行后，当前矩阵均恢复成一个单位矩阵，即相当于没有
1.X坐标轴从左至右，Y坐标轴从下至上，Z坐标轴从里至外。
2.OpenGL屏幕中心的坐标值是X和Y轴上的0.0f点。
3.中心左面的坐标值是负值，右面是正值。
移向屏幕顶端是正值，移向屏幕底端是负值。
移入屏幕深处是负值，移出屏幕则是正值。



然后，就可以进行模型变换和视图变换了。进行模型和视图变换，主要涉及到三个函数：
glTranslate *，把当前矩阵和一个表示移动物体的矩阵相乘。三个参数分别表示了在三个坐标上的**位移值**。
glRotate *，把当前矩阵和一个表示旋转物体的矩阵相乘。物体将绕着(0,0,0)到(x,y,z)的矢量以逆时针旋转，参数angle表示旋转的角度。
glScale *，把当前矩阵和一个表示缩放物体的矩阵相乘。x,y,z分别表示在该方向上的缩放比例。

```c
 void glTranslatef(GLfloat x,GLfloat y,GLfloat z);
```

这个函数是将object在当前位置上平移一个(x,y,z)向量

```c
 void glRotatef(GLfloat angle,GLfloat x,GLfloat y,GLfloat z);
```

其中,angle为旋转的角度,单位为度.重点是x,y,z表达的是什么意思呢?应该如何取值？这里的x,y,z值相当于一个布尔值，0.0表示假，而非零参数则表示真。所以如果你想让当前的几何图形围绕着z轴旋转，那么x和y都设为0，而z设为非零值即可。如果这里的x,y,z的值都设置为0.0，那么将围绕着x轴旋转。还有一点需要注意，如果设置的旋转值（x,y,z的值）为正数，那么旋转的方向是逆时针的，如果旋转值是负数，那么旋转的方向是顺时针的。

```c
 void glScalef(GLfloat x,GLfloat y,GLfloat z);
```

将object在x、y、z方向上分别进行缩放。

以上都是针对改变物体的位置和方向来介绍的。如果要改变观察点的位置，除了配合使用glRotate()和glTranslate()函数以外，还可以使用这个函数：gluLookAt()。这个函数是针对眼睛\相机而言的：





```c
void gluLookAt(GLdouble eyex,GLdouble eyey,GLdouble eyez,GLdouble centerx,GLdouble centery,GLdouble centerz,GLdouble upx,GLdouble upy,GLdouble upz)
```

- eyex,eyey,eyez 指定相机(视点)的坐标
- centerx,centery,centerz 指定了object的位置
- upx,upy,upz 指定相机向上的方向

如果把相机想象成为自己的脑袋：

第一组数据就是脑袋的位置 

第二组数据就是眼睛看的物体的位置

第三组就是头顶朝向的方向（因为我可以歪着头看同一个物体）。





